generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  // url          = env("DATABASE_URL")
  url      = "postgresql://dev:dev@localhost:5432/tags"

  relationMode = "prisma"
}

enum USERTYPE {
  GUEST
  PRO
}

model user {
  id            String   @id @unique @default(uuid())
  name          String
  avatar        String
  email         String?
  accountNumber Int?
  type          USERTYPE
  createdTags   tag[]    @relation("created")
  usedTags      tag[]    @relation("used")

  @@unique([id, name])
}

enum TAGSTYPE {
  FREE
  PREMIUM
  PAID
}

model tag {
  id          Int      @unique @default(autoincrement())
  slug        String   @id @unique
  type        TAGSTYPE
  bank        String
  account     String
  name        String
  phone       String
  style       Json
  user        user?    @relation(fields: [userId], references: [id], "created")
  userId      String?
  creator     user?    @relation(fields: [creatorId, creatorName], references: [id, name], "used")
  creatorId   String?
  creatorName String   @default("ORIGINAL")

  @@index([creatorId, creatorName])
  @@index([userId])
}
